<span class="badge" [ngStyle]="{ 'background-color': currentBackgroundColor }">
  <div class="input-group">
    <div class="d-flex flex-row">
      <i class="material-icons align-self-center mr-1" style="font-size: 18px" [ngStyle]="{ color: textColor }">label</i>
      <textarea
        [readOnly]="readOnly"
        #focusTarget
        type="text"
        maxlength="30"
        rows="1"
        class="form-control form-control-sm rounded font-weight-bold"
        [ngStyle]="{ color: textColor }"
        [ngClass]="{ 'rounded-b-0 is-editing': isEditing && !readOnly, readonly: readOnly }"
        id="tagInputEditable"
        [value]="current"
        (input)="current = $event.target.value"
        autocomplete="off"
        (click)="!readOnly && enterEdit()"
        [placeholder]="placeholder"
        (keyup.control.enter)="onSave()"
        (keydown.enter)="$event.preventDefault()"
        (keyup.esc)="revert()"
        appAutowidth
      >
      </textarea>
    </div>
    <div *ngIf="isEditing && !readOnly" class="edit-controls d-flex w-100 justify-content-between">
      <button
        class="btn btn-sm btn-primary rounded-t-0 rounded-br-0 m-0 px-2 d-flex"
        style="height: 2rem"
        (click)="onSave()"
        [disabled]="!valid()"
        type="button"
        i18n
      >
        <i class="material-icons" style="font-size: 18px">check</i>
      </button>
      <button class="btn btn-sm btn-secondary rounded-t-0 rounded-bl-0 m-0 px-2 d-flex" style="height: 2rem" (click)="revert()" type="button" i18n>
        <i class="material-icons" style="font-size: 18px">undo</i>
      </button>
      <div class="flex-1"></div>
      <button class="btn btn-sm btn-secondary rounded-t-0 m-0 px-2 d-flex" style="height: 2rem" (click)="randomColor()" type="button" i18n>
        <i class="material-icons" style="font-size: 18px">autorenew</i>
      </button>
    </div>
  </div>
</span>
